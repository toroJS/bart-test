<div class="gameWrapper">

  <mat-card class="gameScorecard">
    <mat-card-header class="gameScore">
        <!-- TODO: Add user name -->
        <mat-card-subtitle>Username</mat-card-subtitle>
        <div>
          <strong>TOTAL: (ðŸ’° {{ totalPoints$ | async }})</strong>
          @if(!(burts$ | async) && ((balloonSize$ | async) ?? 0) > 0){
            <span style="color: green;"> + {{ balloonSize$ | async }}</span>
          }
        </div>
    </mat-card-header>
    <mat-card-footer>
      <!-- TODO: Correctly show progress, we need to calculate current round vs total and put that in a range of 0 to 100-->
      <mat-progress-bar mode="determinate" value="{{ round$ | async }}"></mat-progress-bar>
    </mat-card-footer>
  </mat-card>

  <app-balloon
    [size]="(balloonSize$ | async) ?? 1"
    [burst]="(burts$ | async) ?? false"
  ></app-balloon>

  <div class="gameActions">
    @if(gameEnd$ | async) {
      <h1>game finished</h1>
      } @else { @if( !(burts$ | async) ) {
      <button mat-flat-button color="primary" style="width: 50%;" (click)="pumpBalloon()">
        Inflate
      </button>
      } @if( !(burts$ | async) && ((balloonSize$ | async) ?? 0) > 0) {
      <button mat-flat-button color="accent" style="width: 50%;" (click)="collectPoints()">
        Collect <strong> ðŸ’°+{{ balloonSize$ | async }}</strong>
      </button>
      } @if( (burts$ | async)) {
      <button mat-flat-button color="primary" (click)="nextRound()">
        Next round
      </button>
      } }
  </div>
</div>
